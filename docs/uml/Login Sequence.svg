<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="987px" preserveAspectRatio="none" style="width:1433px;height:987px;background:#FFFFFF;" version="1.1" viewBox="0 0 1433 987" width="1433px" zoomAndPan="magnify"><title>My Nottingham - User Login Sequence Diagram</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="584.9014" x="433.8838" y="37.1182">My Nottingham - User Login Sequence Diagram</text><rect fill="#FFFFFF" height="413.3911" style="stroke:#000000;stroke-width:1.0;" width="10" x="397.3379" y="235.1499"/><rect fill="#FFFFFF" height="191.7959" style="stroke:#000000;stroke-width:1.0;" width="10" x="669.3008" y="264.9492"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="902.6318" y="294.7485"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1054.9438" y="354.3472"/><rect fill="#FFFFFF" height="72.5986" style="stroke:#000000;stroke-width:1.0;" width="10" x="1212.9297" y="486.5444"/><line style="stroke:#000000;stroke-width:1.0;" x1="28" x2="28" y1="130.752" y2="905.5342"/><line style="stroke:#000000;stroke-width:1.0;" x1="207.3066" x2="207.3066" y1="130.752" y2="905.5342"/><line style="stroke:#000000;stroke-width:1.0;" x1="402.2764" x2="402.2764" y1="130.752" y2="905.5342"/><line style="stroke:#000000;stroke-width:1.0;" x1="673.5381" x2="673.5381" y1="130.752" y2="905.5342"/><line style="stroke:#000000;stroke-width:1.0;" x1="906.7456" x2="906.7456" y1="130.752" y2="905.5342"/><line style="stroke:#000000;stroke-width:1.0;" x1="1059.5181" x2="1059.5181" y1="130.752" y2="905.5342"/><line style="stroke:#000000;stroke-width:1.0;" x1="1217.3696" x2="1217.3696" y1="130.752" y2="905.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="127.8125">User</text><ellipse cx="28.9277" cy="61.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M28.9277,69.7373 L28.9277,96.7373 M15.9277,77.7373 L41.9277,77.7373 M28.9277,96.7373 L15.9277,111.7373 M28.9277,96.7373 L41.9277,111.7373 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="918.6094">User</text><ellipse cx="28.9277" cy="930.5488" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M28.9277,938.5488 L28.9277,965.5488 M15.9277,946.5488 L41.9277,946.5488 M28.9277,965.5488 L15.9277,980.5488 M28.9277,965.5488 L41.9277,980.5488 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="119.1982" x="148.3066" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105.1982" x="155.3066" y="119.8125">LoginFragment</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="119.1982" x="148.3066" y="904.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="105.1982" x="155.3066" y="925.6094">LoginFragment</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="126.123" x="339.2764" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.123" x="346.2764" y="119.8125">LoginViewModel</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="126.123" x="339.2764" y="904.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.123" x="346.2764" y="925.6094">LoginViewModel</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="179.5254" x="584.5381" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="165.5254" x="591.5381" y="119.8125">FirebaseUserRepository</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="179.5254" x="584.5381" y="904.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="165.5254" x="591.5381" y="925.6094">FirebaseUserRepository</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="105.7725" x="854.7456" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="91.7725" x="861.7456" y="119.8125">FirebaseAuth</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="105.7725" x="854.7456" y="904.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="91.7725" x="861.7456" y="925.6094">FirebaseAuth</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="138.8516" x="990.5181" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="124.8516" x="997.5181" y="119.8125">FirebaseDatabase</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="138.8516" x="990.5181" y="904.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="124.8516" x="997.5181" y="925.6094">FirebaseDatabase</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="117.1201" x="1159.3696" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103.1201" x="1166.3696" y="119.8125">TokenManager</text><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="117.1201" x="1159.3696" y="904.5342"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103.1201" x="1166.3696" y="925.6094">TokenManager</text><rect fill="#FFFFFF" height="413.3911" style="stroke:#000000;stroke-width:1.0;" width="10" x="397.3379" y="235.1499"/><rect fill="#FFFFFF" height="191.7959" style="stroke:#000000;stroke-width:1.0;" width="10" x="669.3008" y="264.9492"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="902.6318" y="294.7485"/><rect fill="#FFFFFF" height="29.7993" style="stroke:#000000;stroke-width:1.0;" width="10" x="1054.9438" y="354.3472"/><rect fill="#FFFFFF" height="72.5986" style="stroke:#000000;stroke-width:1.0;" width="10" x="1212.9297" y="486.5444"/><polygon fill="#000000" points="195.9058,158.5513,205.9058,162.5513,195.9058,166.5513,199.9058,162.5513" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="28.9277" x2="201.9058" y1="162.5513" y2="162.5513"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.978" x="35.9277" y="157.8218">Enter email &amp; password</text><line style="stroke:#000000;stroke-width:1.0;" x1="207.9058" x2="249.9058" y1="192.3506" y2="192.3506"/><line style="stroke:#000000;stroke-width:1.0;" x1="249.9058" x2="249.9058" y1="192.3506" y2="205.3506"/><line style="stroke:#000000;stroke-width:1.0;" x1="208.9058" x2="249.9058" y1="205.3506" y2="205.3506"/><polygon fill="#000000" points="218.9058,201.3506,208.9058,205.3506,218.9058,209.3506,214.9058,205.3506" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="138.5693" x="214.9058" y="187.6211">Validate input format</text><polygon fill="#000000" points="385.3379,231.1499,395.3379,235.1499,385.3379,239.1499,389.3379,235.1499" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="207.9058" x2="391.3379" y1="235.1499" y2="235.1499"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.4175" x="214.9058" y="230.4204">login(email, password)</text><polygon fill="#000000" points="657.3008,260.9492,667.3008,264.9492,657.3008,268.9492,661.3008,264.9492" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407.3379" x2="663.3008" y1="264.9492" y2="264.9492"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.4175" x="414.3379" y="260.2197">login(email, password)</text><polygon fill="#000000" points="890.6318,290.7485,900.6318,294.7485,890.6318,298.7485,894.6318,294.7485" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="679.3008" x2="896.6318" y1="294.7485" y2="294.7485"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.3311" x="686.3008" y="290.019">signInWithEmailAndPassword()</text><polygon fill="#000000" points="690.3008,320.5479,680.3008,324.5479,690.3008,328.5479,686.3008,324.5479" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="684.3008" x2="906.6318" y1="324.5479" y2="324.5479"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.2056" x="696.3008" y="319.8184">AuthResult (uid)</text><polygon fill="#000000" points="1042.9438,350.3472,1052.9438,354.3472,1042.9438,358.3472,1046.9438,354.3472" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="679.3008" x2="1048.9438" y1="354.3472" y2="354.3472"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.2051" x="686.3008" y="349.6177">getReference("users/{uid}")</text><polygon fill="#000000" points="690.3008,380.1465,680.3008,384.1465,690.3008,388.1465,686.3008,384.1465" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="684.3008" x2="1058.9438" y1="384.1465" y2="384.1465"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.4771" x="696.3008" y="379.417">User data snapshot</text><line style="stroke:#000000;stroke-width:1.0;" x1="679.3008" x2="721.3008" y1="413.9458" y2="413.9458"/><line style="stroke:#000000;stroke-width:1.0;" x1="721.3008" x2="721.3008" y1="413.9458" y2="426.9458"/><line style="stroke:#000000;stroke-width:1.0;" x1="680.3008" x2="721.3008" y1="426.9458" y2="426.9458"/><polygon fill="#000000" points="690.3008,422.9458,680.3008,426.9458,690.3008,430.9458,686.3008,426.9458" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.9814" x="686.3008" y="409.2163">Parse user data</text><polygon fill="#000000" points="418.3379,452.7451,408.3379,456.7451,418.3379,460.7451,414.3379,456.7451" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412.3379" x2="673.3008" y1="456.7451" y2="456.7451"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.3301" x="424.3379" y="452.0156">Result&lt;User&gt;</text><polygon fill="#000000" points="1200.9297,482.5444,1210.9297,486.5444,1200.9297,490.5444,1204.9297,486.5444" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407.3379" x2="1206.9297" y1="486.5444" y2="486.5444"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.5571" x="414.3379" y="481.8149">saveUserSession(user)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1222.9297" x2="1264.9297" y1="516.3438" y2="516.3438"/><line style="stroke:#000000;stroke-width:1.0;" x1="1264.9297" x2="1264.9297" y1="516.3438" y2="529.3438"/><line style="stroke:#000000;stroke-width:1.0;" x1="1223.9297" x2="1264.9297" y1="529.3438" y2="529.3438"/><polygon fill="#000000" points="1233.9297,525.3438,1223.9297,529.3438,1233.9297,533.3438,1229.9297,529.3438" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196.7393" x="1229.9297" y="511.6143">Store token, userId, userType</text><polygon fill="#000000" points="418.3379,555.1431,408.3379,559.1431,418.3379,563.1431,414.3379,559.1431" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412.3379" x2="1216.9297" y1="559.1431" y2="559.1431"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51.9492" x="424.3379" y="554.4136">Success</text><polygon fill="#000000" points="662.3008,584.9424,672.3008,588.9424,662.3008,592.9424,666.3008,588.9424" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407.3379" x2="668.3008" y1="588.9424" y2="588.9424"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="211.1992" x="414.3379" y="584.2129">updateFcmToken(userId, token)</text><polygon fill="#000000" points="662.3008,614.7417,672.3008,618.7417,662.3008,622.7417,666.3008,618.7417" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407.3379" x2="668.3008" y1="618.7417" y2="618.7417"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="242.9629" x="414.3379" y="614.0122">updatePresence(userId, online=true)</text><polygon fill="#000000" points="218.9058,644.541,208.9058,648.541,218.9058,652.541,214.9058,648.541" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="212.9058" x2="401.3379" y1="648.541" y2="648.541"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.1709" x="224.9058" y="643.8115">LoginResult.Success</text><line style="stroke:#000000;stroke-width:1.0;" x1="207.9058" x2="249.9058" y1="678.3403" y2="678.3403"/><line style="stroke:#000000;stroke-width:1.0;" x1="249.9058" x2="249.9058" y1="678.3403" y2="691.3403"/><line style="stroke:#000000;stroke-width:1.0;" x1="208.9058" x2="249.9058" y1="691.3403" y2="691.3403"/><polygon fill="#000000" points="218.9058,687.3403,208.9058,691.3403,218.9058,695.3403,214.9058,691.3403" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.4321" x="214.9058" y="673.6108">Navigate to HomeFragment</text><polygon fill="#000000" points="39.9277,717.1396,29.9277,721.1396,39.9277,725.1396,35.9277,721.1396" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33.9277" x2="206.9058" y1="721.1396" y2="721.1396"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.7529" x="45.9277" y="716.4102">Show Home Screen</text><path d="M820,734.1396 L820,775.1396 L994,775.1396 L994,744.1396 L984,734.1396 L820,734.1396 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M984,734.1396 L984,744.1396 L994,744.1396 L984,734.1396 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.8354" x="826" y="752.2095">Firebase Authentication</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.7451" x="826" y="768.0088">handles secure login</text><path d="M1108,785.7383 L1108,889.7383 L1327,889.7383 L1327,795.7383 L1317,785.7383 L1108,785.7383 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1317,785.7383 L1317,795.7383 L1327,795.7383 L1317,785.7383 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.27" x="1114" y="803.8081">DataStore stores:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.1831" x="1114" y="819.6074">- Auth token</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="60.1123" x="1114" y="835.4067">- User ID</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.8467" x="1114" y="851.2061">- User type (Student/Teacher)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="74.2993" x="1114" y="867.0054">- Full name</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.0405" x="1114" y="882.8047">- Avatar key</text><!--SRC=[XLHTQzj047pNhzZweIWGD- -c3SGufe4uX5XrdhVIHZeYtQdtuM1A_tjtLvQZ54DVJZhTxCpjt9m-nOOwWhv5OxCicjWIR0xmu68qjcwmWpdy2EJXtjN6mfP-9R8bmSfWxR7BCYoZymh9UlJHbAP76s6c-BN7kYCRPu01xjTd43j3RnjNKJj0TfkFcBNnz1C32VyJzIuOLZieLgRdmJSfDWgHb_EG5KQKfy9Mou-WmhsItQ35chm2YasMgGdpQ-vY0RSsyeGwD2ryXXv3U7E-okxN8s27hQam4XZRfmWlpdSOn_NTPW6jz9uhm-M9u4BCD7kf4oCo7gH06lr_XTgHoIWrqla2WgdjdNqsiRcLkXjRFHuByqcbkYG3p4zgCdsYaDe8UJAiKz57_4bfjLn0JV69NiXBCl9POgV2rMyk-pERoB3Bg-L4GWrban22nJuqBav567sI6F2Fw0D16gkEgwEXmsQ_2kdrb6UmvUXamS20UqtJba8mpkP2EDab7tLnmcuvR0HHud2fodVLy2mEFIbkbD-cicJ2gNBnxmccNYAnBZlDLpxoAVt5EUYZfw2MZb1dMsFfM_I9Bexany3fNHey-79cBqESJl5ymBsfvNjqyDrrD5vJXJ16_E6U6lUcox0jFH7_7gpZ6hVd4z0C08pNIUTCO4gCR2glD6YhbW84AXDxgEdDo5OW75CcjWb0hkDWTf0nBFZRN4a7UtIgWRbRlRz7FWN8jp5LB7rLSBkDdAMihrFRWiME1Y8s0Jsyqk5z2ty1]--></g></svg>