<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="919px" preserveAspectRatio="none" style="width:1556px;height:919px;background:#FFFFFF;" version="1.1" viewBox="0 0 1556 919" width="1556px" zoomAndPan="magnify"><title>My Nottingham - MVVM Architecture Pattern</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="549.6777" x="498.6611" y="37.1182">My Nottingham - MVVM Architecture Pattern</text><!--cluster View (Fragment)--><g id="cluster_View (Fragment)"><path d="M235.5,58.7373 L370.6553,58.7373 A3.75,3.75 0 0 1 373.1553,61.2373 L380.1553,81.752 L801.5,81.752 A2.5,2.5 0 0 1 804,84.252 L804,237.2373 A2.5,2.5 0 0 1 801.5,239.7373 L235.5,239.7373 A2.5,2.5 0 0 1 233,237.2373 L233,61.2373 A2.5,2.5 0 0 1 235.5,58.7373 " fill="#ADD8E6" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="233" x2="380.1553" y1="81.752" y2="81.752"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="134.1553" x="237" y="74.8125">View (Fragment)</text></g><!--cluster ViewModel--><g id="cluster_ViewModel"><path d="M214.5,288.7373 L300.7373,288.7373 A3.75,3.75 0 0 1 303.2373,291.2373 L310.2373,311.752 L920.5,311.752 A2.5,2.5 0 0 1 923,314.252 L923,467.2373 A2.5,2.5 0 0 1 920.5,469.7373 L214.5,469.7373 A2.5,2.5 0 0 1 212,467.2373 L212,291.2373 A2.5,2.5 0 0 1 214.5,288.7373 " fill="#90EE90" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="212" x2="310.2373" y1="311.752" y2="311.752"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="85.2373" x="216" y="304.8125">ViewModel</text></g><!--cluster Repository--><g id="cluster_Repository"><path d="M794.5,518.7373 L880.2998,518.7373 A3.75,3.75 0 0 1 882.7998,521.2373 L889.7998,541.752 L1546.5,541.752 A2.5,2.5 0 0 1 1549,544.252 L1549,697.2373 A2.5,2.5 0 0 1 1546.5,699.7373 L794.5,699.7373 A2.5,2.5 0 0 1 792,697.2373 L792,521.2373 A2.5,2.5 0 0 1 794.5,518.7373 " fill="#FFFFE0" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="792" x2="889.7998" y1="541.752" y2="541.752"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84.7998" x="796" y="534.8125">Repository</text></g><!--cluster Data Source--><g id="cluster_Data Source"><path d="M876.5,748.7373 L973.0117,748.7373 A3.75,3.75 0 0 1 975.5117,751.2373 L982.5117,771.752 L1532.5,771.752 A2.5,2.5 0 0 1 1535,774.252 L1535,910.2373 A2.5,2.5 0 0 1 1532.5,912.7373 L876.5,912.7373 A2.5,2.5 0 0 1 874,910.2373 L874,751.2373 A2.5,2.5 0 0 1 876.5,748.7373 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="874" x2="982.5117" y1="771.752" y2="771.752"/><text fill="#000000" font-family="Verdana" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="95.5117" x="878" y="764.8125">Data Source</text></g><!--class HomeFragment--><g id="elem_HomeFragment"><rect codeLine="7" fill="#FFFFFF" height="129.0732" id="HomeFragment" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="242.1113" x="249" y="94.7373"/><ellipse cx="312.0762" cy="108.7373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M314.8418,110.2686 L317.2324,111.0186 Q316.6855,113.0029 315.4043,113.9717 Q314.1387,114.9404 312.1699,114.9404 Q309.748,114.9404 308.1855,113.2842 Q306.6387,111.6279 306.6387,108.7529 Q306.6387,105.7217 308.2012,104.0498 Q309.7637,102.3623 312.3262,102.3623 Q314.5605,102.3623 315.9512,103.6748 Q316.7793,104.4561 317.2012,105.9248 L314.7637,106.5029 Q314.5449,105.5498 313.8574,105.0029 Q313.1855,104.4561 312.2012,104.4561 Q310.8418,104.4561 309.998,105.4404 Q309.1699,106.4092 309.1699,108.5811 Q309.1699,110.8779 309.998,111.8623 Q310.8262,112.8467 312.1543,112.8467 Q313.1387,112.8467 313.8418,112.2217 Q314.5449,111.5967 314.8418,110.2686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108.459" x="329.5762" y="114.3052">HomeFragment</text><line style="stroke:#000000;stroke-width:1.0;" x1="250" x2="490.1113" y1="122.7373" y2="122.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="230.1113" x="255" y="140.8125">-binding: FragmentHomeBinding</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="206.1445" x="255" y="157.8271">-viewModel: HomeViewModel</text><line style="stroke:#000000;stroke-width:1.0;" x1="250" x2="490.1113" y1="164.7666" y2="164.7666"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="121.0918" x="255" y="182.8418">+onCreateView()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="154.0342" x="255" y="199.8564">+observeViewModel()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="159.1953" x="255" y="216.8711">+setupClickListeners()</text></g><!--class MessageFragment--><g id="elem_MessageFragment"><rect codeLine="15" fill="#FFFFFF" height="129.0732" id="MessageFragment" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="261.334" x="526.5" y="94.7373"/><ellipse cx="589.5762" cy="108.7373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M592.3418,110.2686 L594.7324,111.0186 Q594.1855,113.0029 592.9043,113.9717 Q591.6387,114.9404 589.6699,114.9404 Q587.248,114.9404 585.6855,113.2842 Q584.1387,111.6279 584.1387,108.7529 Q584.1387,105.7217 585.7012,104.0498 Q587.2637,102.3623 589.8262,102.3623 Q592.0605,102.3623 593.4512,103.6748 Q594.2793,104.4561 594.7012,105.9248 L592.2637,106.5029 Q592.0449,105.5498 591.3574,105.0029 Q590.6855,104.4561 589.7012,104.4561 Q588.3418,104.4561 587.498,105.4404 Q586.6699,106.4092 586.6699,108.5811 Q586.6699,110.8779 587.498,111.8623 Q588.3262,112.8467 589.6543,112.8467 Q590.6387,112.8467 591.3418,112.2217 Q592.0449,111.5967 592.3418,110.2686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="127.6816" x="607.0762" y="114.3052">MessageFragment</text><line style="stroke:#000000;stroke-width:1.0;" x1="527.5" x2="786.834" y1="122.7373" y2="122.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="249.334" x="532.5" y="140.8125">-binding: FragmentMessageBinding</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="225.3672" x="532.5" y="157.8271">-viewModel: MessageViewModel</text><line style="stroke:#000000;stroke-width:1.0;" x1="527.5" x2="786.834" y1="164.7666" y2="164.7666"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="121.0918" x="532.5" y="182.8418">+onCreateView()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="155.2168" x="532.5" y="199.8564">+setupRecyclerView()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="179.0674" x="532.5" y="216.8711">+observeConversations()</text></g><!--class HomeViewModel--><g id="elem_HomeViewModel"><rect codeLine="25" fill="#FFFFFF" height="129.0732" id="HomeViewModel" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="283.0996" x="228.5" y="324.7373"/><ellipse cx="308.6079" cy="338.7373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M311.3735,340.2686 L313.7642,341.0186 Q313.2173,343.0029 311.936,343.9717 Q310.6704,344.9404 308.7017,344.9404 Q306.2798,344.9404 304.7173,343.2842 Q303.1704,341.6279 303.1704,338.7529 Q303.1704,335.7217 304.7329,334.0498 Q306.2954,332.3623 308.8579,332.3623 Q311.0923,332.3623 312.4829,333.6748 Q313.311,334.4561 313.7329,335.9248 L311.2954,336.5029 Q311.0767,335.5498 310.3892,335.0029 Q309.7173,334.4561 308.7329,334.4561 Q307.3735,334.4561 306.5298,335.4404 Q305.7017,336.4092 305.7017,338.5811 Q305.7017,340.8779 306.5298,341.8623 Q307.3579,342.8467 308.686,342.8467 Q309.6704,342.8467 310.3735,342.2217 Q311.0767,341.5967 311.3735,340.2686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115.3838" x="326.1079" y="344.3052">HomeViewModel</text><line style="stroke:#000000;stroke-width:1.0;" x1="229.5" x2="510.5996" y1="352.7373" y2="352.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="220.7666" x="234.5" y="370.8125">-tokenManager: TokenManager</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="271.0996" x="234.5" y="387.8271">+welcomeMessage: LiveData&lt;String&gt;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="230.0498" x="234.5" y="404.8418">+isTeacher: LiveData&lt;Boolean&gt;</text><line style="stroke:#000000;stroke-width:1.0;" x1="229.5" x2="510.5996" y1="411.7813" y2="411.7813"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="172.5117" x="234.5" y="429.8564">-loadWelcomeMessage()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138.9814" x="234.5" y="446.8711">-loadUserRoleInfo()</text></g><!--class ChatDetailViewModel--><g id="elem_ChatDetailViewModel"><rect codeLine="33" fill="#FFFFFF" height="112.0586" id="ChatDetailViewModel" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="360.2227" x="547" y="333.2373"/><ellipse cx="649.5093" cy="347.2373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M652.2749,348.7686 L654.6655,349.5186 Q654.1187,351.5029 652.8374,352.4717 Q651.5718,353.4404 649.603,353.4404 Q647.1812,353.4404 645.6187,351.7842 Q644.0718,350.1279 644.0718,347.2529 Q644.0718,344.2217 645.6343,342.5498 Q647.1968,340.8623 649.7593,340.8623 Q651.9937,340.8623 653.3843,342.1748 Q654.2124,342.9561 654.6343,344.4248 L652.1968,345.0029 Q651.978,344.0498 651.2905,343.5029 Q650.6187,342.9561 649.6343,342.9561 Q648.2749,342.9561 647.4312,343.9404 Q646.603,344.9092 646.603,347.0811 Q646.603,349.3779 647.4312,350.3623 Q648.2593,351.3467 649.5874,351.3467 Q650.5718,351.3467 651.2749,350.7217 Q651.978,350.0967 652.2749,348.7686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="147.7041" x="667.0093" y="352.8052">ChatDetailViewModel</text><line style="stroke:#000000;stroke-width:1.0;" x1="548" x2="906.2227" y1="361.2373" y2="361.2373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="348.2227" x="553" y="379.3125">-messageRepository: FirebaseMessageRepository</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="316.4561" x="553" y="396.3271">+messages: LiveData&lt;List&lt;ChatMessage&gt;&gt;</text><line style="stroke:#000000;stroke-width:1.0;" x1="548" x2="906.2227" y1="403.2666" y2="403.2666"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="199.0078" x="553" y="421.3418">+sendMessage(text: String)</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="279.1797" x="553" y="438.3564">+loadMessages(conversationId: String)</text></g><!--class FirebaseMessageRepository--><g id="elem_FirebaseMessageRepository"><rect codeLine="42" fill="#FFFFFF" height="129.0732" id="FirebaseMessageRepository" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="395.5781" x="808" y="554.7373"/><ellipse cx="905.1055" cy="568.7373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M907.8711,570.2686 L910.2617,571.0186 Q909.7148,573.0029 908.4336,573.9717 Q907.168,574.9404 905.1992,574.9404 Q902.7773,574.9404 901.2148,573.2842 Q899.668,571.6279 899.668,568.7529 Q899.668,565.7217 901.2305,564.0498 Q902.793,562.3623 905.3555,562.3623 Q907.5898,562.3623 908.9805,563.6748 Q909.8086,564.4561 910.2305,565.9248 L907.793,566.5029 Q907.5742,565.5498 906.8867,565.0029 Q906.2148,564.4561 905.2305,564.4561 Q903.8711,564.4561 903.0273,565.4404 Q902.1992,566.4092 902.1992,568.5811 Q902.1992,570.8779 903.0273,571.8623 Q903.8555,572.8467 905.1836,572.8467 Q906.168,572.8467 906.8711,572.2217 Q907.5742,571.5967 907.8711,570.2686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="193.8672" x="922.6055" y="574.3052">FirebaseMessageRepository</text><line style="stroke:#000000;stroke-width:1.0;" x1="809" x2="1202.5781" y1="582.7373" y2="582.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="206.3086" x="814" y="600.8125">-database: FirebaseDatabase</text><line style="stroke:#000000;stroke-width:1.0;" x1="809" x2="1202.5781" y1="607.752" y2="607.752"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="383.5781" x="814" y="625.8271">+getConversationsFlow(): Flow&lt;List&lt;Conversation&gt;&gt;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="352.2354" x="814" y="642.8418">+getMessagesFlow(): Flow&lt;List&lt;ChatMessage&gt;&gt;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="251.4053" x="814" y="659.8564">+sendMessage(): Result&lt;Boolean&gt;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="280.458" x="814" y="676.8711">+createConversation(): Result&lt;String&gt;</text></g><!--class FirebaseUserRepository--><g id="elem_FirebaseUserRepository"><rect codeLine="50" fill="#FFFFFF" height="129.0732" id="FirebaseUserRepository" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="294.0029" x="1239" y="554.7373"/><ellipse cx="1299.4888" cy="568.7373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M1302.2544,570.2686 L1304.645,571.0186 Q1304.0981,573.0029 1302.8169,573.9717 Q1301.5513,574.9404 1299.5825,574.9404 Q1297.1606,574.9404 1295.5981,573.2842 Q1294.0513,571.6279 1294.0513,568.7529 Q1294.0513,565.7217 1295.6138,564.0498 Q1297.1763,562.3623 1299.7388,562.3623 Q1301.9731,562.3623 1303.3638,563.6748 Q1304.1919,564.4561 1304.6138,565.9248 L1302.1763,566.5029 Q1301.9575,565.5498 1301.27,565.0029 Q1300.5981,564.4561 1299.6138,564.4561 Q1298.2544,564.4561 1297.4106,565.4404 Q1296.5825,566.4092 1296.5825,568.5811 Q1296.5825,570.8779 1297.4106,571.8623 Q1298.2388,572.8467 1299.5669,572.8467 Q1300.5513,572.8467 1301.2544,572.2217 Q1301.9575,571.5967 1302.2544,570.2686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="165.5254" x="1316.9888" y="574.3052">FirebaseUserRepository</text><line style="stroke:#000000;stroke-width:1.0;" x1="1240" x2="1532.0029" y1="582.7373" y2="582.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="206.3086" x="1245" y="600.8125">-database: FirebaseDatabase</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="141.0527" x="1245" y="617.8271">-auth: FirebaseAuth</text><line style="stroke:#000000;stroke-width:1.0;" x1="1240" x2="1532.0029" y1="624.7666" y2="624.7666"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="282.0029" x="1245" y="642.8418">+login(email, password): Result&lt;User&gt;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="241.7803" x="1245" y="659.8564">+getUserProfile(uid): Flow&lt;User&gt;</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="250.4209" x="1245" y="676.8711">+updateProfile(): Result&lt;Boolean&gt;</text></g><!--class FirebaseRealtimeDB--><g id="elem_FirebaseRealtimeDB"><rect codeLine="60" fill="#FFFFFF" height="112.0586" id="FirebaseRealtimeDB" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="307.709" x="1211" y="784.7373"/><ellipse cx="1290.6089" cy="798.7373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M1293.3745,800.2686 L1295.7651,801.0186 Q1295.2183,803.0029 1293.937,803.9717 Q1292.6714,804.9404 1290.7026,804.9404 Q1288.2808,804.9404 1286.7183,803.2842 Q1285.1714,801.6279 1285.1714,798.7529 Q1285.1714,795.7217 1286.7339,794.0498 Q1288.2964,792.3623 1290.8589,792.3623 Q1293.0933,792.3623 1294.4839,793.6748 Q1295.312,794.4561 1295.7339,795.9248 L1293.2964,796.5029 Q1293.0776,795.5498 1292.3901,795.0029 Q1291.7183,794.4561 1290.7339,794.4561 Q1289.3745,794.4561 1288.5308,795.4404 Q1287.7026,796.4092 1287.7026,798.5811 Q1287.7026,800.8779 1288.5308,801.8623 Q1289.3589,802.8467 1290.687,802.8467 Q1291.6714,802.8467 1292.3745,802.2217 Q1293.0776,801.5967 1293.3745,800.2686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="140.9912" x="1308.1089" y="804.3052">FirebaseRealtimeDB</text><line style="stroke:#000000;stroke-width:1.0;" x1="1212" x2="1517.709" y1="812.7373" y2="812.7373"/><line style="stroke:#000000;stroke-width:1.0;" x1="1212" x2="1517.709" y1="820.7373" y2="820.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="295.709" x="1217" y="838.8125">+getReference(path): DatabaseReference</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="184.8574" x="1217" y="855.8271">+addValueEventListener()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="84.3418" x="1217" y="872.8418">+setValue()</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="130.9561" x="1217" y="889.8564">+updateChildren()</text></g><!--class RoomDatabase--><g id="elem_RoomDatabase"><rect codeLine="67" fill="#FFFFFF" height="95.0439" id="RoomDatabase" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="284.6514" x="890.5" y="793.2373"/><ellipse cx="975.9604" cy="807.2373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M978.7261,808.7686 L981.1167,809.5186 Q980.5698,811.5029 979.2886,812.4717 Q978.0229,813.4404 976.0542,813.4404 Q973.6323,813.4404 972.0698,811.7842 Q970.5229,810.1279 970.5229,807.2529 Q970.5229,804.2217 972.0854,802.5498 Q973.6479,800.8623 976.2104,800.8623 Q978.4448,800.8623 979.8354,802.1748 Q980.6636,802.9561 981.0854,804.4248 L978.6479,805.0029 Q978.4292,804.0498 977.7417,803.5029 Q977.0698,802.9561 976.0854,802.9561 Q974.7261,802.9561 973.8823,803.9404 Q973.0542,804.9092 973.0542,807.0811 Q973.0542,809.3779 973.8823,810.3623 Q974.7104,811.3467 976.0386,811.3467 Q977.0229,811.3467 977.7261,810.7217 Q978.4292,810.0967 978.7261,808.7686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="106.2305" x="993.4604" y="812.8052">RoomDatabase</text><line style="stroke:#000000;stroke-width:1.0;" x1="891.5" x2="1174.1514" y1="821.2373" y2="821.2373"/><line style="stroke:#000000;stroke-width:1.0;" x1="891.5" x2="1174.1514" y1="829.2373" y2="829.2373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="153.1592" x="896.5" y="847.3125">+userDao(): UserDao</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="213.0488" x="896.5" y="864.3271">+messageDao(): MessageDao</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="272.6514" x="896.5" y="881.3418">+conversationDao(): ConversationDao</text></g><!--class TokenManager--><g id="elem_TokenManager"><rect fill="#FFFFFF" height="44" id="TokenManager" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="131.1201" x="304.5" y="597.2373"/><ellipse cx="317.5" cy="611.2373" fill="#FFFFFF" rx="9" ry="9" style="stroke:#000000;stroke-width:1.0;"/><path d="M320.2656,612.7686 L322.6563,613.5186 Q322.1094,615.5029 320.8281,616.4717 Q319.5625,617.4404 317.5938,617.4404 Q315.1719,617.4404 313.6094,615.7842 Q312.0625,614.1279 312.0625,611.2529 Q312.0625,608.2217 313.625,606.5498 Q315.1875,604.8623 317.75,604.8623 Q319.9844,604.8623 321.375,606.1748 Q322.2031,606.9561 322.625,608.4248 L320.1875,609.0029 Q319.9688,608.0498 319.2813,607.5029 Q318.6094,606.9561 317.625,606.9561 Q316.2656,606.9561 315.4219,607.9404 Q314.5938,608.9092 314.5938,611.0811 Q314.5938,613.3779 315.4219,614.3623 Q316.25,615.3467 317.5781,615.3467 Q318.5625,615.3467 319.2656,614.7217 Q319.9688,614.0967 320.2656,612.7686 Z " fill="#000000"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103.1201" x="329.5" y="616.8052">TokenManager</text><line style="stroke:#000000;stroke-width:1.0;" x1="305.5" x2="434.6201" y1="625.2373" y2="625.2373"/><line style="stroke:#000000;stroke-width:1.0;" x1="305.5" x2="434.6201" y1="633.2373" y2="633.2373"/></g><g id="elem_GMN22"><path d="M11,368.2373 L11,409.8359 L192.9956,409.8359 L192.9956,378.2373 L182.9956,368.2373 L11,368.2373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M182.9956,368.2373 L182.9956,378.2373 L192.9956,378.2373 L182.9956,368.2373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.8237" x="17" y="386.3071">View&#23618;&#21482;&#36127;&#36131;UI&#26174;&#31034;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160.9956" x="17" y="402.1064">&#36890;&#36807;&#35266;&#23519;LiveData&#26356;&#26032;&#30028;&#38754;</text></g><g id="elem_GMN25"><path d="M573,598.2373 L573,639.8359 A0,0 0 0 0 573,639.8359 L772.8325,639.8359 A0,0 0 0 0 772.8325,639.8359 L772.8325,608.2373 L762.8325,598.2373 L681.77,598.2373 L713.93,445.4273 L673.77,598.2373 L573,598.2373 A0,0 0 0 0 573,598.2373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M762.8325,598.2373 L762.8325,608.2373 L772.8325,608.2373 L762.8325,598.2373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160.0942" x="579" y="616.3071">ViewModel&#23618;&#22788;&#29702;&#19994;&#21153;&#36923;&#36753;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.8325" x="579" y="632.1064">&#36890;&#36807;LiveData&#26292;&#38706;&#29366;&#24577;&#32473;View</text></g><g id="elem_GMN28"><path d="M674.5,819.7373 L674.5,861.3359 A0,0 0 0 0 674.5,861.3359 L855.8672,861.3359 A0,0 0 0 0 855.8672,861.3359 L855.8672,829.7373 L845.8672,819.7373 L791.19,819.7373 L935.97,684.0173 L783.19,819.7373 L674.5,819.7373 A0,0 0 0 0 674.5,819.7373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M845.8672,819.7373 L845.8672,829.7373 L855.8672,829.7373 L845.8672,819.7373 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160.3672" x="680.5" y="837.8071">Repository&#23618;&#32479;&#19968;&#25968;&#25454;&#35775;&#38382;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.2188" x="680.5" y="853.6064">&#23553;&#35013;Firebase&#21644;Room&#25805;&#20316;</text></g><!--link HomeFragment to HomeViewModel--><g id="link_HomeFragment_HomeViewModel"><path codeLine="74" d="M370,223.7473 C370,255.2373 370,287.1773 370,318.6673 " fill="none" id="HomeFragment-to-HomeViewModel" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="370,324.6673,374,315.6673,370,319.6673,366,315.6673,370,324.6673" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.2651" x="371" y="269.8071">observes</text></g><!--link MessageFragment to ChatDetailViewModel--><g id="link_MessageFragment_ChatDetailViewModel"><path codeLine="75" d="M676.5,223.7473 C687.06,258.1373 698.2088,294.4716 708.3388,327.4616 " fill="none" id="MessageFragment-to-ChatDetailViewModel" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="710.1,333.1973,711.282,323.4196,708.6323,328.4176,703.6344,325.7679,710.1,333.1973" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.2651" x="691" y="269.8071">observes</text></g><!--link HomeViewModel to TokenManager--><g id="link_HomeViewModel_TokenManager"><path codeLine="76" d="M370,453.7473 C370,501.7073 370,558.6173 370,590.9773 " fill="none" id="HomeViewModel-to-TokenManager" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="370,596.9773,374,587.9773,370,591.9773,366,587.9773,370,596.9773" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="29.5166" x="371" y="499.8071">uses</text></g><!--link ChatDetailViewModel to FirebaseMessageRepository--><g id="link_ChatDetailViewModel_FirebaseMessageRepository"><path codeLine="77" d="M794.54,445.4273 C834.86,478.3773 881.574,516.5506 923.584,550.8806 " fill="none" id="ChatDetailViewModel-to-FirebaseMessageRepository" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="928.23,554.6773,923.7921,545.885,924.3583,551.5134,918.7299,552.0797,928.23,554.6773" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="29.5166" x="860" y="499.8071">uses</text></g><!--link FirebaseMessageRepository to FirebaseRealtimeDB--><g id="link_FirebaseMessageRepository_FirebaseRealtimeDB"><path codeLine="78" d="M1110.32,684.0173 C1162.49,715.9173 1219.8808,751.0079 1269.9208,781.5979 " fill="none" id="FirebaseMessageRepository-to-FirebaseRealtimeDB" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="1275.04,784.7273,1269.4474,776.6203,1270.774,782.1194,1265.2748,783.446,1275.04,784.7273" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.269" x="1186" y="729.8071">reads/writes</text></g><!--link FirebaseUserRepository to FirebaseRealtimeDB--><g id="link_FirebaseUserRepository_FirebaseRealtimeDB"><path codeLine="79" d="M1379.9,684.0173 C1376.85,715.9173 1373.7621,748.1646 1370.8321,778.7546 " fill="none" id="FirebaseUserRepository-to-FirebaseRealtimeDB" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="1370.26,784.7273,1375.0999,776.1497,1370.7367,779.7501,1367.1363,775.3869,1370.26,784.7273" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.269" x="1377" y="729.8071">reads/writes</text></g><!--link FirebaseMessageRepository to RoomDatabase--><g id="link_FirebaseMessageRepository_RoomDatabase"><path codeLine="80" d="M1013.85,684.0173 C1018.13,718.8273 1022.6083,755.2121 1026.5083,786.9521 " fill="none" id="FirebaseMessageRepository-to-RoomDatabase" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#000000" points="1027.24,792.9073,1030.1125,783.4867,1026.6302,787.9446,1022.1723,784.4623,1027.24,792.9073" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="44.0972" x="1020" y="729.8071">caches</text></g><!--link HomeFragment to GMN22--><g id="link_HomeFragment_GMN22"><path d="M282.38,224.0373 C259.06,241.8373 234.19,261.5673 212,280.7373 C178.67,309.5473 142.61,345.8773 121.18,368.0673 " fill="none" id="HomeFragment-GMN22" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--SRC=[dLPRRnD757xVNp6bBuuWq6SBHKfiQ2F55NA8gpwETq-ye-pEM3EpTjCAAQ1U90Jg1G5jIXLnaP1u26aLLOYey6VYsx_ecVMkPzPPGwbVx9dpdVdETywPC_v8Xn03wKQKSK_jCDwbaiR4ZwXIgrfBrauqhFk2RxAlWNpYUPhf24XZbtmkj6Qy4o9wcJHQhGPPbNx8DFWwaK2kKQr1Si_hKd-7Te2SQp7eayfLIJinSBrqZdoymJgXNeiI8Dzu13yfA_bCn92ZCeFvBBSP3v2mIdAZ0QvDDosgXomD4K1KJGzgvSiPuhpWDGbKfwRAahFVLY1xriErAT19jnOnVsU3AGqSfChCDpmdz0OeXLh_K_GPzbq2CiW7Q4ZZR8A_wqSW5mYi2Tx3-AbcWbiLD-OgbHBcDVfK0l0pHPh1N9rQx01lK8u7oIgvxgni87s8VFJFv5N91kj1dMfwUHCRZdTMB9Afwq3zq1mr0wq94G7b5hKS2HfyKJZJaPrQjr1v4ztM-ROeArmjfBeEchAeL5GyFRK9NQ6O5d8NoyWajAdA2Qt91fzvAITsqpsN3LdcjhBYreu7UVWQlj9LCas7Kq4Z9OEeYk_KSJqeeelrjC7b1VqIeaZq2nLTACXDH80Y3CZghsSxDiWEw4ABNKMcoX9wu7UM0CViPW0zStKbJk_F6kARe998d-sHytvwNrnc1-xsNQ4lSfLf__pVZ2pJH8VMleehjwGTnYiGO-jT85tax0iPsCWCSJ53PkUQ5DiiWah2WZn7Sy2aYu51ZbkGc6ANcBZ9faYa3_RUqztI9ca2ZJIBeRxcvC94ruHjaC1zg7If3f4tpyRCOE4q25eKf_-L7ex3VAxEJRCKuEvDXTL25WLuNDbTRWeHvwnkT0bcg4w5ISRMzEUPgvgP6xELqpzEvsImMd7BfhJmWbsyk38tBQiacyJActym3BXi5ZaknRECWpja4OawbLTsYC4klkMPusA0w-xKlqhmPWNgKb_Yss_zvsxCXpcNanSAMoM-UHYKvt6XWRJntuY8YTWk_7t0aXZvWpzl3NvyCJu-61y_tLeV_lfczEmrcYPx- -EtFuoVtngyFCWdzF3tu-63ez7zEvC_ddWuMeWv_Gn7INOpglItuNlsxUYdxqzVxGzkFvxidOpV_3mZd57j7qyU_JMw_VTmx-Rev3VZlPZnNS-DNI3nwEJWzDNUyFxHyExX-F3jvE4X8WP7DyTFlylF6FnonwHoUE_kwJ-FBEM_]--></g></svg>