# Backend API æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•æ—¶é—´ï¼š2025-11-11 21:30
æµ‹è¯•ç¯å¢ƒï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ (H2 å†…å­˜æ•°æ®åº“)
åŸºç¡€ URL: http://localhost:8080/api

---

## âœ… æµ‹è¯•æˆåŠŸçš„ API ç«¯ç‚¹

### 1. GET /api/users
**æè¿°**: è·å–æ‰€æœ‰ç”¨æˆ·
**çŠ¶æ€**: âœ… æˆåŠŸ
**è¿”å›æ•°æ®**: 6ä¸ªç”¨æˆ·ï¼ˆ3ä¸ªå­¦ç”Ÿï¼Œ2ä¸ªè€å¸ˆï¼Œ1ä¸ªç®¡ç†å‘˜ï¼‰
**å“åº”æ ¼å¼**:
```json
{
  "success": true,
  "message": "Success",
  "data": [...]
}
```

### 2. GET /api/users/students
**æè¿°**: è·å–æ‰€æœ‰å­¦ç”Ÿ
**çŠ¶æ€**: âœ… æˆåŠŸ
**è¿”å›æ•°æ®**: 3ä¸ªå­¦ç”Ÿ
- student1 (Alice Wong) - Computer Science, GPA 3.75
- student2 (Bob Chen) - Software Engineering, GPA 3.5
- student3 (Charlie Lee) - Electrical Engineering, GPA 3.85

### 3. GET /api/users/teachers
**æè¿°**: è·å–æ‰€æœ‰æ•™å¸ˆ
**çŠ¶æ€**: âœ… æˆåŠŸ
**è¿”å›æ•°æ®**: 2ä¸ªæ•™å¸ˆ
- teacher1 (Dr. Sarah Johnson) - Computer Science Department
- teacher2 (Prof. John Smith) - Software Engineering Department

### 4. GET /api/users/{id}
**æè¿°**: æ ¹æ®IDè·å–å•ä¸ªç”¨æˆ·
**çŠ¶æ€**: âœ… æˆåŠŸ
**æµ‹è¯•ç”¨ä¾‹**: GET /api/users/1
**è¿”å›æ•°æ®**: student1 çš„å®Œæ•´ä¿¡æ¯

---

## ğŸ”§ éœ€è¦è¿›ä¸€æ­¥æµ‹è¯•çš„åŠŸèƒ½

### PUT /api/users/{id}
**æè¿°**: æ›´æ–°ç”¨æˆ·ä¿¡æ¯
**çŠ¶æ€**: âš ï¸ éœ€è¦å®ç° UserService.updateUser() æ–¹æ³•
**å¤‡æ³¨**: å½“å‰ UserService å¯èƒ½ç¼ºå°‘å®Œæ•´çš„æ›´æ–°é€»è¾‘

### DELETE /api/users/{id}
**æè¿°**: åˆ é™¤ç”¨æˆ·
**çŠ¶æ€**: âš ï¸ æœªæµ‹è¯•
**å¤‡æ³¨**: éœ€è¦å®ç°åˆ é™¤åŠŸèƒ½

---

## ğŸ“Š æ•°æ®åº“çŠ¶æ€

### H2 æ§åˆ¶å°
- **URL**: http://localhost:8080/api/h2-console/
- **JDBC URL**: jdbc:h2:mem:mynottingham
- **ç”¨æˆ·å**: sa
- **å¯†ç **: (ç©º)
- **çŠ¶æ€**: âœ… å¯è®¿é—®

### æ•°æ®åº“è¡¨
æ‰€æœ‰è¡¨å·²æˆåŠŸåˆ›å»ºï¼š
- âœ… users
- âœ… students
- âœ… teachers
- âœ… courses
- âœ… enrollments
- âœ… attendances
- âœ… bookings
- âœ… errands
- âœ… forum_posts
- âœ… forum_comments
- âœ… messages
- âœ… course_schedules

### æµ‹è¯•æ•°æ®
å·²æˆåŠŸåŠ è½½æµ‹è¯•æ•°æ® (data.sql)ï¼š
- 6ä¸ªç”¨æˆ· (3å­¦ç”Ÿ + 2è€å¸ˆ + 1ç®¡ç†å‘˜)
- 3ä¸ªè¯¾ç¨‹
- 4ä¸ªé€‰è¯¾è®°å½•
- 5ä¸ªè€ƒå‹¤è®°å½•
- 2ä¸ªåœºåœ°é¢„è®¢
- 3ä¸ªè·‘è…¿ä»»åŠ¡
- 3ä¸ªè®ºå›å¸–å­
- 3ä¸ªè®ºå›è¯„è®º
- 4æ¡æ¶ˆæ¯

---

## ğŸ¯ åŠŸèƒ½éªŒè¯

### JSON åºåˆ—åŒ–
- âœ… å¾ªç¯å¼•ç”¨é—®é¢˜å·²è§£å†³ (@JsonIgnoreProperties)
- âœ… Hibernate å»¶è¿ŸåŠ è½½ä»£ç†å·²å¤„ç† (Hibernate5JakartaModule)
- âœ… Java 8 æ—¥æœŸæ—¶é—´åºåˆ—åŒ–æ­£å¸¸ (JavaTimeModule)
- âœ… å¯†ç å­—æ®µå·²éšè— (@JsonIgnore)

### å®‰å…¨æ€§
- âœ… CORS å·²é…ç½®ï¼ˆå…è®¸æ‰€æœ‰æ¥æºï¼‰
- âœ… CSRF å·²ç¦ç”¨ï¼ˆREST API æ¨¡å¼ï¼‰
- âœ… å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†
- âš ï¸ å½“å‰æ‰€æœ‰ç«¯ç‚¹éƒ½å¯å…¬å¼€è®¿é—®ï¼ˆpermitAllï¼‰

---

## æµ‹è¯•è´¦å·ä¿¡æ¯

æ‰€æœ‰è´¦å·çš„å¯†ç éƒ½æ˜¯ï¼š`password123` (BCrypt åŠ å¯†å­˜å‚¨)

### å­¦ç”Ÿè´¦å·
- `student1` - Alice Wong (Computer Science, GPA 3.75)
- `student2` - Bob Chen (Software Engineering, GPA 3.5)
- `student3` - Charlie Lee (Electrical Engineering, GPA 3.85)

### æ•™å¸ˆè´¦å·
- `teacher1` - Dr. Sarah Johnson (Associate Professor)
- `teacher2` - Prof. John Smith (Professor)

### ç®¡ç†å‘˜è´¦å·
- `admin` - System Admin

---

## ğŸ’¡ å»ºè®®å’Œæ”¹è¿›

1. **å®ç°å®Œæ•´çš„ CRUD æ“ä½œ**
   - å®Œå–„ PUT ç«¯ç‚¹çš„æ›´æ–°é€»è¾‘
   - å®ç° DELETE ç«¯ç‚¹
   - æ·»åŠ  POST ç«¯ç‚¹åˆ›å»ºæ–°ç”¨æˆ·

2. **æ·»åŠ èº«ä»½éªŒè¯**
   - å®ç° JWT è®¤è¯
   - æ·»åŠ ç™»å½•/æ³¨å†Œç«¯ç‚¹
   - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

3. **æ•°æ®éªŒè¯**
   - æ·»åŠ è¾“å…¥éªŒè¯
   - é”™è¯¯å¤„ç†ä¼˜åŒ–
   - è¿”å›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

4. **æ€§èƒ½ä¼˜åŒ–**
   - è€ƒè™‘æ·»åŠ åˆ†é¡µåŠŸèƒ½
   - ä¼˜åŒ–æŸ¥è¯¢ï¼ˆé¿å… N+1 é—®é¢˜ï¼‰
   - æ·»åŠ ç¼“å­˜

5. **API æ–‡æ¡£**
   - é›†æˆ Swagger/OpenAPI
   - æä¾›äº¤äº’å¼ API æ–‡æ¡£

---

## æ€»ç»“

âœ… **æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸**: æ‰€æœ‰æŸ¥è¯¢ï¼ˆGETï¼‰API éƒ½èƒ½æ­£å¸¸å·¥ä½œ
âœ… **æ•°æ®å®Œæ•´æ€§**: æµ‹è¯•æ•°æ®å·²æˆåŠŸåŠ è½½ï¼Œå…³è”å…³ç³»æ­£ç¡®
âœ… **åºåˆ—åŒ–æ­£å¸¸**: JSON åºåˆ—åŒ–é—®é¢˜å·²å…¨éƒ¨è§£å†³
âš ï¸ **å¾…å®Œå–„åŠŸèƒ½**: æ›´æ–°å’Œåˆ é™¤æ“ä½œéœ€è¦è¿›ä¸€æ­¥å®ç°å’Œæµ‹è¯•

**åç«¯å·²å¯ç”¨äº Android åº”ç”¨é›†æˆï¼**
